services:
  - type: cron
    name: zillow-scraper-main
    env: node
    plan: free
    buildCommand: npm install
    startCommand: npm run scrape:all
    schedule: "0 13,1 * * *"  # Run daily at 8 AM EST (1 PM UTC) and 8 PM EST (1 AM UTC)
    envVars:
      - key: NODE_ENV
        value: production
      - key: SMARTPROXY_USER
        sync: false
      - key: SMARTPROXY_PASS
        sync: false

  - type: cron
    name: zillow-scraper-delayed-retry
    env: node
    plan: free
    buildCommand: npm install
    startCommand: npm run delayed:retry
    schedule: "30 13,1 * * *"  # Run 30 minutes after main scrape (8:30 AM EST and 8:30 PM EST)
    envVars:
      - key: NODE_ENV
        value: production
      - key: SMARTPROXY_USER
        sync: false
      - key: SMARTPROXY_PASS
        sync: false